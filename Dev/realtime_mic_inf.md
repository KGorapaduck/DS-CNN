# PC-Raspberry Pi μ‹¤μ‹κ°„ μ†μΌ“ KWS νμ΄ν”„λΌμΈ μ„¤κ³„μ„

λ³Έ λ¬Έμ„λ” PCμ λ§μ΄ν¬ ν•λ“μ›¨μ–΄μ—μ„ μΊ΅μ²ν• μ‹¤μ‹κ°„ μμ„± λ°μ΄ν„°λ¥Ό λΌμ¦λ² λ¦¬νμ΄(Raspberry Pi)λ΅ μ „μ†΅ν•κ³ , λΌμ¦λ² λ¦¬νμ΄μ—μ„ DS-CNN KWS λ¨λΈμ„ κµ¬λ™ν•μ—¬ 'quiz', 'understand'λ¥Ό μ¶”λ΅ ν•λ” ν†µμ‹  κΈ°λ° μ• ν”λ¦¬μΌ€μ΄μ…μ κµ¬ν„ κ³„νμ…λ‹λ‹¤.

## 1. ν†µμ‹  λ°©μ‹ λ° κΈ°μ  μ¤νƒ
- **ν†µμ‹  ν”„λ΅ν† μ½**: λ°μ΄ν„°μ μ•μ •μ„±(μ μ‹¤ λ°©μ§€)μ„ μ„ν•΄ **TCP μ†μΌ“ ν†µμ‹ **μ„ μ±„νƒν•©λ‹λ‹¤. μ¤λ””μ¤ μ¤νΈλ¦¬λ° μ†λ„ λ³΄μ¥κ³Ό ν¨ν‚· λ„λ½ λ°©μ§€λ¥Ό λ™μ‹μ— κ³ λ ¤ν•©λ‹λ‹¤.
- **μ¤λ””μ¤ μΊ΅μ² λΌμ΄λΈλ¬λ¦¬**: PC(Windows)μ—μ„ λ§μ΄ν¬ μ…λ ¥μ„ λ°›κΈ° μ„ν•΄ **PyAudio** λΌμ΄λΈλ¬λ¦¬λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤. (`pip install pyaudio` ν•„μ”)

## 2. μ»΄ν¬λ„νΈ μ„¤κ³„

μ„¤κ³„λ” ν¬κ² 2κ°€μ§€ μ»΄ν¬λ„νΈλ΅ λ‚λ‰λ©°, ν™κ²½μ— λ§κ² λ…λ¦½μ μΈ μ¤ν¬λ¦½νΈλ΅ λ¶„λ¦¬ν•μ—¬ μ‹¤ν–‰λλ„λ΅ μ‘μ„±ν•©λ‹λ‹¤.

### 2.1 λΌμ¦λ² λ¦¬νμ΄ μΈ΅: μ„λ²„ (Inference Server)

μ¤λ””μ¤ λ°”μ΄νΈ μ¤νΈλ¦Όμ„ μμ‹ ν•κ³ , κΈ°μ΅΄μ μ „μ²λ¦¬ λ° μ¶”λ΅ μ„ μν–‰ν•λ” μ—­ν• μ„ λ‹΄λ‹Ήν•©λ‹λ‹¤. (`server_pi_socket.py`)

- **ν¬νΈ κ°λ°©**: μ§€μ •λ ν¬νΈ(μ: `5000`)μ— ν¬νΈ λ°”μΈλ”© λ° TCP μ†μΌ“ μ„λ²„λ¥Ό μ—½λ‹λ‹¤.
- **μ¤νΈλ¦Ό μμ‹ **: μ—°κ²°λ PC ν΄λΌμ΄μ–ΈνΈλ΅λ¶€ν„° `CHUNK_SIZE(4000)` λ§νΌμ μ¤λ””μ¤ ν”„λ μ„(Bytes)μ„ μ§€μ†μ μΌλ΅ μ½μ–΄μµλ‹λ‹¤.
- **μ¬λΌμ΄λ”© μλ„μ°**: 1μ΄ μ‚¬μ΄μ¦μ `Sliding Window Buffer`λ¥Ό ν†µν•΄ λ°μ΄ν„°λ¥Ό μ¤‘μ²©λκ² μ μ§€ν•©λ‹λ‹¤.
- **μ¶”λ΅  μν–‰**: TensorFlow κ·Έλν”„ λ΅λ“ λ° MFCC λ³€ν™ ν›„ DS-CNN λ¨λΈμ„ ν†µν•΄ ν΄λμ¤ ν™•λ¥ μ„ μ¶”λ΅ ν•©λ‹λ‹¤.
- **μ•λ¦Ό λ° λ°ν™**: μ§€μ •λ ν‚¤μ›λ“('quiz', 'understand') κ°μ§€ μ¦‰μ‹ μ„λ²„μ ν„°λ―Έλ„μ— λ©”μ‹μ§€λ¥Ό μ¶λ ¥ν•λ©°, ν΄λΌμ΄μ–ΈνΈ PCμ—κ² κ°μ§€ μƒνƒ(μ: "TRIGGER_QUIZ")λ¥Ό μ‘λ‹µ(SendBack)ν•©λ‹λ‹¤.

### 2.2 PC μΈ΅: ν΄λΌμ΄μ–ΈνΈ (Audio Streamer)

μ‚¬μ©μμ λ§μ΄ν¬ μ…λ ¥μ„ μΈν„°μ…‰νΈν•κ³  μ‹¤μ‹κ°„μΌλ΅ μ„λ²„μ— μ „μ†΅ν•λ” μ—­ν• μ„ λ‹΄λ‹Ήν•©λ‹λ‹¤. (`client_pc_mic.py`)

- **λ§μ΄ν¬ μ—°κ²°**: `PyAudio` λΌμ΄λΈλ¬λ¦¬λ¥Ό ν†µν•΄ μ‹μ¤ν… κΈ°λ³Έ λ§μ΄ν¬ μ„Έμ…μ„ μ—½λ‹λ‹¤ (16,000Hz, 16bit, 1μ±„λ„).
- **μ„λ²„ μ ‘μ†**: λΌμ¦λ² λ¦¬νμ΄μ IP μ£Όμ†λ¥Ό μ…λ ¥λ°›μ•„ μ†μΌ“μ„ μ—°κ²°(TCP Connect)ν•©λ‹λ‹¤.
- **λ°μ΄ν„° μ „μ†΅**: μ½λ°±(Callback) λλ” λ°λ³µ λ£¨ν”„λ¥Ό ν†µν•΄ `CHUNK_DURATION_MS(0.25μ΄)` κ°„κ²©μΌλ΅ λ§μ΄ν¬ μ¤λ””μ¤ λ²„νΌλ¥Ό μλΌμ„ TCP μ†μΌ“μΌλ΅ μ¤νΈλ¦¬λ° μ „μ†΅(`sendall`)ν•©λ‹λ‹¤.
- **μ΄λ²¤νΈ μμ‹ **: λΌμ¦λ² λ¦¬νμ΄λ΅λ¶€ν„° ν‚¤μ›λ“ νΈλ¦¬κ±° μ™„λ£ λ©”μ‹μ§€κ°€ μμ‹ λλ”μ§€ λ€κΈ°ν•λ©°, μμ‹  μ‹ λ΅μ»¬ ν„°λ―Έλ„μ— ν‘μ‹ν•λ” λ¨λ‹ν„°λ§ κΈ°λ¥μ„ μν–‰ν•©λ‹λ‹¤.

## 3. κ²€μ¦ κ³„ν (Verification Plan)

μ‹μ¤ν… κµ¬μ¶• ν›„ λ‹¤μ μ μ°¨λ¥Ό κ±°μ³ μ •μƒ μ‘λ™ μ—¬λ¶€λ¥Ό κ²€μ¦ν•©λ‹λ‹¤.

1. **λ„¤νΈμ›ν¬ ν™•μΈ**: λΌμ¦λ² λ¦¬νμ΄ PCμ λ΅μ»¬λ§ IP μ£Όμ† νμ•… (μ: `192.168.0.x`).
2. **μ„λ²„ κµ¬λ™**: λΌμ¦λ² λ¦¬νμ΄ ν™κ²½μ—μ„ `python server_pi_socket.py` μ‹¤ν–‰ (Listening μƒνƒ μ§„μ…).
3. **ν΄λΌμ΄μ–ΈνΈ κµ¬λ™**: μλ„μ° PCμ—μ„ `python client_pc_mic.py [λΌμ¦λ² λ¦¬νμ΄IP]` μ‹¤ν–‰.
4. **λ°ν™” ν…μ¤νΈ**: PC λ§μ΄ν¬μ— λ€κ³  "ν€΄μ¦", "μ΄ν•΄ν–λ‚μ”"λ¥Ό λ°μν•λ©° μ¤λ””μ¤ μ¤νΈλ¦Όμ΄ μ μ‹¤ μ—†μ΄ μ •μƒ μ²λ¦¬λλ”μ§€ ν™•μΈ.
5. **κ²°κ³Ό ν™•μΈ**: λΌμ¦λ² λ¦¬νμ΄ μ¶λ ¥ ν„°λ―Έλ„κ³Ό ν΄λΌμ΄μ–ΈνΈ ν„°λ―Έλ„ μ–‘μΈ΅μ— λ™μ‹μ— `π”¥ κ°μ§€λ¨` λ΅κ·Έκ°€ μ¶λ ¥λλ”μ§€ ν™•μΈ.
